<div class="createApplication">
    <mat-card>
        <mat-card-header>
            <mat-card-title>Создание заявки</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-form-field appearance="fill">
                <mat-label>Кабинет</mat-label>
                <mat-select [formControl]="selectedPlace">
                    <mat-option [value]="item" *ngFor="let item of places">
                        <span *ngIf="item.description == null">Кабинет - {{item.name}}</span>
                        <span *ngIf="item.description != null">{{item.description}} - {{item.name}}</span>
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field class="example-full-width">
                <mat-label>Описание</mat-label>
                <textarea matInput [formControl]="desription" placeholder="" style="height: 10vh;" maxlength="255"></textarea>
                <mat-hint align="end">{{desription.value.length}} / 255</mat-hint>
            </mat-form-field>      
            <mat-form-field class="example-full-width" >
                <mat-label>Заявитель</mat-label>
                <input matInput
                       [matAutocomplete]="auto"
                       [formControl]="selectedPerson"
                       [disabled]="authSerivce.isClient()">
                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                  <mat-option *ngFor="let person of filteredPersons | async" [value]="person">
                    <img *ngIf="person.postId == 1" class="autocomplete-image" src="/assets/icons/teacher.png" height="25">
                    <img *ngIf="person.postId == 2 || person.postId == 18" class="autocomplete-image" src="/assets/icons/systemAdministrator.png" height="25">
                    <img *ngIf="person.postId != 2 && person.postId != 18 && person.postId != 1" class="autocomplete-image" src="/assets/icons/employee.png" height="25">
                    <span>{{person.surname}} {{person.name}} {{person.lastname}}</span> |
                    <small>{{person.post?.name}}</small>
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field> 

            <mat-divider></mat-divider>
        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button [disabled]="selectedPlace.hasError('required') || desription.hasError('required') || selectedPerson.hasError('required')" (click)="sendApplication()">Отправить</button> 
        </mat-card-actions>
        <mat-card-footer>
            <mat-progress-bar mode="query" *ngIf="false"></mat-progress-bar>
        </mat-card-footer>
    </mat-card>
</div>